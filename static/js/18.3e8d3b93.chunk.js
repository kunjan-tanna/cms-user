(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[18],{654:function(t,e,a){"use strict";a.r(e);var n=a(128),o=a(11),r=a(12),s=a(14),c=a(13),l=a(10),i=a(0),m=a.n(i),u=a(642),d=a(643),f=a(644),p=a(645),h=a(646),g=a(647),b=a(503),D=a(512),E=a(513),O=a(514),v=a(648),I=a(506),j=a(263),S=a(517),y=a(22),T=a(47),C=a(526),N=a(527),k=a(561),w=a.n(k),P=a(569),A=a.n(P),M=(a(273),a(274),a(558)),R=a(541),x=a(528),Y=a.n(x),U=a(572),F=a.n(U),H=a(131),_=a(27),B={control:function(t){return Object(l.a)(Object(l.a)({},t),{},{backgroundColor:"white"})},option:function(t,e){var a=e.data,n=e.isDisabled,o=e.isFocused,r=e.isSelected,s=a.color?F()(a.color):"#7367f0";return Object(l.a)(Object(l.a)({},t),{},{backgroundColor:n?null:r?a.color:o?s.alpha(.1).css():null,color:n?"#ccc":r?F.a.contrast(s,"white")>2?"white":"black":a.color,cursor:n?"not-allowed":"default",":active":Object(l.a)(Object(l.a)({},t[":active"]),{},{backgroundColor:!n&&(r?a.color:"#7367f0")})})}},G=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(o.a)(this,a),(r=e.call(this,t)).handleInput=function(t){t.persist(),r.setState((function(e){return{formData:Object(l.a)(Object(l.a)({},e.formData),{},Object(n.a)({},t.target.name,t.target.value))}}),(function(){return console.log("Name Input",r.state.formData)}))},r.handleavtar=function(t){t.persist(),r.setState((function(e){return{formData:Object(l.a)(Object(l.a)({},e.formData),{},Object(n.a)({},t.target.name,t.target.files[0]))}}))},r.onCheckChange=function(t){t.persist(),console.log("---checked switch",typeof t.target.checked),r.setState((function(e){return{formData:Object(l.a)(Object(l.a)({},e.formData),{},Object(n.a)({},t.target.name,t.target.checked))}}),(function(){return console.log("-------SWITCH FORMDATA--",t.target.name)}))},r.handleCKEditor=function(t,e,a){console.log("event",t);var n=e.getData();r.setState((function(t){return{formData:Object(l.a)(Object(l.a)({},t.formData),{},{content:n})}}),(function(){return console.log("Name content",r.state.formData)}))},r.handleSelect=function(t,e){r.setState((function(a){return{formData:Object(l.a)(Object(l.a)({},a.formData),{},Object(n.a)({},t,e.value))}}),(function(){console.log("---HANDLE--",r.state.formData,t,e.value)}))},r.handleChange=function(t,e){console.log(e);var a=e&&e.map((function(t){return t.value}));r.setState({value:e}),r.setState((function(e){return{formData:Object(l.a)(Object(l.a)({},e.formData),{},Object(n.a)({},t,a))}}),(function(){console.log("---TAGS UPDATES--",r.state.formData,t,e,a)}))},r.handleFormSubmit=function(){var t=r.state.postId;r.props.dispatch(S.f(t,r.state.formData)).then((function(t){console.log("Update Data POST",t),t.data?(T.b.success("Update Post Successfully",{position:T.b.POSITION.BOTTOM_RIGHT}),setTimeout((function(){_.a.push("/post")}),3e3)):T.b.error("Something went wrong",{position:T.b.POSITION.BOTTOM_RIGHT})})).catch((function(t){T.b.error("Something went wrong",{position:T.b.POSITION.BOTTOM_RIGHT})}))},r.addTag=function(){console.log("----this.value",r.state.formData.tagId);var t=[];r.state.tags.map((function(e){r.state.formData.tagId.map((function(a){a==e.value&&t.push(e)}))})),r.setState({value:t})},r.handleReset=function(){r.setState({formData:{}})},r.state={postId:r.props.location&&r.props.location.state&&r.props.location.state.postId?r.props.location.state.postId:"",commentId:r.props.location&&r.props.location.state&&r.props.location.state.commentId?r.props.location.state.postId:"",formData:{},userdata:r.props.userInfo,categories:[],tags:[],checked:!0,erroMsg:!1},console.log("PROPS",r.props),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dispatch(C.a()),this.props.dispatch(N.a()),this.props.dispatch(S.d(this.state.postId)).then((function(e){console.log("BY Id",e),e&&(t.setState({formData:e.data}),t.addTag())}))}},{key:"render",value:function(){var t=this;return m.a.createElement(u.a,null,m.a.createElement(d.a,{sm:"12"},m.a.createElement(f.a,null,m.a.createElement(p.a,null,m.a.createElement(h.a,null,"Update Post")),m.a.createElement(g.a,{style:{height:"1000px"}},m.a.createElement(d.a,{sm:"12"},m.a.createElement(D.a,{onSubmit:function(e){e.preventDefault(),t.handleFormSubmit()}},m.a.createElement(u.a,null,m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"title"},"Title"),m.a.createElement(v.a,{type:"text",id:"title",name:"title",placeholder:"Title Name",onChange:this.handleInput,value:this.state.formData&&this.state.formData.title?this.state.formData.title:""}))),m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"description"},"Description"),m.a.createElement(v.a,{value:this.state.formData&&this.state.formData.description?this.state.formData.description:"",type:"textarea",name:"description",id:"description",rows:"3",cols:"3",required:!0,placeholder:"Message",onChange:this.handleInput}))),m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"content"},"Content"),m.a.createElement(w.a,{editor:A.a,data:this.state.formData&&this.state.formData.content?this.state.formData.content:"",onChange:this.handleCKEditor}))),m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"publishedAt"},"PublishedAt"),m.a.createElement(v.a,{value:this.state.formData&&Y()(this.state.formData.publishedAt).format("YYYY-MM-DD")?Y()(this.state.formData.publishedAt).format("YYYY-MM-DD"):"",type:"date",name:"publishedAt",id:"publishedAt",disabled:!0,placeholder:"PublishAt",onChange:this.handleInput}))),m.a.createElement(d.a,{className:"pl-0",sm:"12"},m.a.createElement(b.a,{className:"d-sm-flex d-block"},m.a.createElement(b.a,{className:"mt-md-1 mt-0",left:!0},m.a.createElement(b.a,{className:"rounded mr-2",src:H.a.baseURL+"/"+this.state.formData.image,alt:"Please Upload image",height:"112",width:"112"})),m.a.createElement(b.a,{body:!0},m.a.createElement("div",{className:"mt-4"},m.a.createElement(I.a,{accept:"image/*",src:this.state.formData.image,type:"file",id:"image",name:"image",onChange:this.handleavtar}))))),m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"Categories"},"Categories"),m.a.createElement(R.a,{isClearable:!1,styles:B,value:this.state.categories&&this.state.categories.filter((function(e){return e.value===t.state.formData.categoryId})),options:this.state.categories,className:"React",classNamePrefix:"select",id:"categoryId",name:"categoryId",onChange:function(e){return t.handleSelect("categoryId",e)}}))),m.a.createElement(d.a,{sm:"12"},m.a.createElement(E.a,null,m.a.createElement(O.a,{for:"Tags"},"Tags"),m.a.createElement(M.a,{isMulti:!0,onChange:function(e){return t.handleChange("tagId",e)},options:this.state.tags,value:this.state.value,name:"tagId"}))),m.a.createElement(d.a,{className:"d-flex justify-content-end flex-wrap mt-2",sm:"12"},m.a.createElement(j.a.Ripple,{className:"mr-1",color:"primary",type:"submit"},"Update Post"),m.a.createElement(T.a,null),m.a.createElement(j.a.Ripple,{color:"flat-warning",onClick:function(){return t.handleReset()},type:"button"},"Reset")))))))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var a={};if(t.categories&&t.categories.length&&t.categories!==e.categories){var n=t.categories.map((function(t){return{label:t.categoryName,value:t._id,color:"#7367f0"}}));Object.assign(a,{categories:n})}if(t.tags&&t.tags.length&&t.tags!==e.tags){var o=t.tags.map((function(t){return{label:t.tagName,value:t._id}}));Object.assign(a,{tags:o})}return 0!==Object.keys(a).length?a:null}}]),a}(m.a.Component);e.default=Object(y.b)((function(t){return{categories:t.global.categories,tags:t.global.tags,userInfo:t.auth.login.userInfo}}))(G)}}]);
//# sourceMappingURL=18.3e8d3b93.chunk.js.map